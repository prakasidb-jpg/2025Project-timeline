<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timeline Manager (Secure Login)</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üìä</text></svg>">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // ‚úÖ API Key ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏†‡∏≤‡∏û (W ‡πÉ‡∏´‡∏ç‡πà, n ‡πÄ‡∏•‡πá‡∏Å)
        const firebaseConfig = {
            apiKey: "AIzaSyAKWEnv4kzNmcTGHri1_mF_iagsycIqXd8",
            authDomain: "benz-ab922.firebaseapp.com",
            projectId: "benz-ab922",
            storageBucket: "benz-ab922.firebasestorage.app",
            messagingSenderId: "746873956854",
            appId: "1:746873956854:web:02e72ef78ee58d05a73fd7",
            measurementId: "G-EBYCR340BL"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Auth Logic
        window.handleLogin = async function() {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            if(!email || !pass) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");
            try { await signInWithEmailAndPassword(auth, email, pass); }
            catch(e) { alert("Login Error: " + e.message); }
        };

        window.handleLogout = function() {
            signOut(auth).then(() => window.location.reload());
        };

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById('loginOverlay').style.display = 'none';
                document.getElementById('appContent').style.display = 'block';
                document.getElementById('userInfo').textContent = user.email;
                window.currentUserEmail = user.email;
                window.listenToCloud();
            } else {
                document.getElementById('loginOverlay').style.display = 'flex';
                document.getElementById('appContent').style.display = 'none';
            }
        });

        // Database Logic
        function getMachineID() {
            let mid = localStorage.getItem('timeline_mid');
            if(!mid) { mid = 'DEV-'+Math.random().toString(36).substr(2,4).toUpperCase(); localStorage.setItem('timeline_mid', mid); }
            return mid;
        }

        window.saveToCloud = async function() {
            try {
                // showNotification('Saving...', 'info');
                const data = {
                    projects: window.projects,
                    lastUpdated: new Date().toISOString(),
                    updatedBy: window.currentUserEmail,
                    machine: getMachineID()
                };
                await setDoc(doc(db, "timeline", "projectData"), data);
                showNotification('‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', 'success');
            } catch(e) { console.error(e); }
        };

        window.listenToCloud = function() {
            onSnapshot(doc(db, "timeline", "projectData"), (doc) => {
                if(doc.exists()) {
                    const data = doc.data();
                    if(data.projects) {
                        window.projects = data.projects;
                        // Restore selection
                        if(window.renderAll) {
                            if(window.selectedIds) window.projects.forEach(p => window.selectedIds.add(p.id));
                            window.renderAll();
                        }
                    }
                }
            });
        };
    </script>

    <style>
        /* CSS Theme: Purple Gradient (Original Style) */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; color: #333; }
        
        /* Login Overlay */
        #loginOverlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 9999; display: flex; justify-content: center; align-items: center; }
        .login-box { background: white; padding: 40px; border-radius: 15px; width: 100%; max-width: 400px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .login-box input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
        .login-btn { width: 100%; padding: 12px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; margin-top: 10px; }

        /* Main Container */
        #appContent { display: none; }
        .container { max-width: 1600px; margin: 0 auto; background: rgba(255, 255, 255, 0.98); border-radius: 15px; padding: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }

        /* Header */
        .header-bar { background: linear-gradient(135deg, #667eea, #764ba2); padding: 15px 25px; border-radius: 10px; color: white; display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px; }
        .header-title h2 { margin: 0; font-size: 24px; }
        .header-title span { background: #28a745; font-size: 12px; padding: 2px 8px; border-radius: 10px; vertical-align: middle; margin-left: 10px; }
        .user-controls span { font-size: 14px; margin-right: 10px; }
        .logout-btn { background: rgba(255,255,255,0.2); border: 1px solid white; color: white; padding: 5px 10px; border-radius: 5px; cursor: pointer; }

        /* Dashboard Area */
        .dash-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .dash-header h1 { font-size: 28px; color: #333; }
        .btn-save { background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; display: flex; align-items: center; gap: 5px; }
        .btn-save:hover { background: #218838; }

        /* Stats Cards */
        .stats-row { display: flex; gap: 15px; margin-bottom: 25px; }
        .stat-card { flex: 1; background: white; border: 1px solid #eee; border-radius: 10px; padding: 20px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .stat-card h4 { font-size: 14px; color: #666; margin-bottom: 5px; }
        .stat-card .val { font-size: 28px; font-weight: bold; color: #333; }

        /* Project Selector */
        .section-box { background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid #eee; }
        .project-list { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
        .proj-btn { display: flex; align-items: center; gap: 8px; padding: 8px 15px; background: white; border: 2px solid #ddd; border-radius: 8px; cursor: pointer; transition: all 0.2s; }
        .proj-btn.selected { border-color: #667eea; background: #eef2ff; }
        .proj-color { width: 15px; height: 15px; border-radius: 50%; }
        .btn-group { margin-top: 15px; display: flex; gap: 10px; }
        .btn-std { padding: 8px 15px; border: none; border-radius: 5px; color: white; cursor: pointer; font-size: 14px; }
        
        /* View Controls */
        .view-controls { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; background: #f8f9fa; padding: 10px; border-radius: 8px; }
        .view-btn { padding: 8px 15px; border: 1px solid #667eea; background: white; color: #667eea; border-radius: 5px; cursor: pointer; }
        .view-btn.active { background: #667eea; color: white; }
        
        /* Timeline */
        .timeline-wrapper { background: white; border-radius: 10px; padding: 20px; overflow-x: auto; border: 1px solid #eee; }
        .timeline-header { display: flex; border-bottom: 2px solid #667eea; padding-bottom: 10px; min-width: 1200px; position: sticky; top: 0; background: white; z-index: 50; }
        .col-task { width: 300px; font-weight: bold; padding-left: 10px; }
        .col-cal { flex: 1; display: flex; }
        .cal-cell { flex: 1; text-align: center; border-left: 1px solid #f0f0f0; font-size: 12px; color: #888; padding: 5px 0; }
        
        .row-group { margin-bottom: 15px; border-left: 4px solid #ccc; padding-left: 10px; margin-top: 10px; }
        .row-head { font-weight: bold; padding: 5px 0; background: #fcfcfc; border-radius: 4px; display: flex; align-items: center; gap: 10px; }
        .row-task { display: flex; align-items: center; height: 50px; border-bottom: 1px solid #f9f9f9; min-width: 1200px; }
        .row-task:hover { background: #f8f9fa; }
        .task-label { width: 300px; font-size: 14px; padding-left: 10px; display: flex; justify-content: space-between; align-items: center; padding-right: 20px; }
        .task-actions { opacity: 0.3; transition: 0.3s; }
        .row-task:hover .task-actions { opacity: 1; }
        .task-chart { flex: 1; position: relative; height: 40px; display: flex; align-items: center; }
        
        .bar-container { position: absolute; height: 26px; background: rgba(0,0,0,0.05); border-radius: 13px; overflow: hidden; }
        .bar-fill { height: 100%; border-radius: 13px; font-size: 11px; color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; text-shadow: 0 1px 2px rgba(0,0,0,0.3); }
        .bar-fill.phase1 { background: linear-gradient(90deg, #667eea, #764ba2); }
        .bar-fill.phase2 { background: linear-gradient(90deg, #f093fb, #f5576c); }
        .bar-fill.phase3 { background: linear-gradient(90deg, #4facfe, #00f2fe); }
        .bar-fill.phase4 { background: linear-gradient(90deg, #43e97b, #38f9d7); }
        .bar-fill.phase5 { background: linear-gradient(90deg, #fa709a, #fee140); }

        /* Modal */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 100; }
        .modal-box { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px; border-radius: 10px; width: 450px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); }
        .form-row { margin-bottom: 15px; }
        .form-row label { display: block; margin-bottom: 5px; font-weight: bold; font-size: 14px; }
        .form-row input, .form-row select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; }
    </style>
</head>
<body>
    <div id="loginOverlay">
        <div class="login-box">
            <div style="font-size: 50px; margin-bottom: 15px;">üîí</div>
            <h2 style="margin-bottom: 20px; color:#333;">Team Login</h2>
            <input type="email" id="email" placeholder="Email Address">
            <input type="password" id="password" placeholder="Password">
            <button class="login-btn" onclick="handleLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
        </div>
    </div>

    <div id="appContent" class="container">
        <div class="header-bar">
            <div class="header-title">
                <h2>üöÄ Timeline Manager <span>Online</span></h2>
            </div>
            <div class="user-controls">
                <span id="userInfo">User</span>
                <button class="logout-btn" onclick="handleLogout()">Logout</button>
            </div>
        </div>

        <div class="dash-header">
            <h1>Project Timeline Dashboard</h1>
            <button class="btn-save" onclick="window.saveToCloud()">
                ‚òÅÔ∏è Save to Cloud
            </button>
        </div>

        <div class="stats-row">
            <div class="stat-card"><h4>Tasks ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4><div class="val" id="st_total">0</div></div>
            <div class="stat-card"><h4>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥</h4><div class="val" id="st_prog">0</div></div>
            <div class="stat-card"><h4>‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</h4><div class="val" id="st_done">0</div></div>
        </div>

        <div class="section-box">
            <h3>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π:</h3>
            <div class="project-list" id="projectList"></div>
            <div class="btn-group">
                <button class="btn-std" style="background:#667eea;" onclick="selectAll()">‚úÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                <button class="btn-std" style="background:#999;" onclick="deselectAll()">‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                <button class="btn-std" style="background:#007bff;" onclick="addNewProject()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</button>
            </div>
        </div>

        <div class="view-controls">
            <button class="view-btn active" id="vmMonth" onclick="setMode('month')">üìÖ ‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
            <button class="view-btn" id="vmWeek" onclick="setMode('week')">üìÜ ‡∏£‡∏≤‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</button>
            <div style="flex:1"></div>
            <button class="btn-std" style="background:#667eea;" onclick="openTaskForm()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏° Task ‡πÉ‡∏´‡∏°‡πà</button>
        </div>

        <div class="timeline-wrapper">
            <div class="timeline-header">
                <div class="col-task">Project / Task Name</div>
                <div class="col-cal" id="calHeader"></div>
            </div>
            <div id="timelineBody"></div>
        </div>

        <div style="text-align:center; margin-top:30px; color:#999; font-size:12px;">
            ¬© 2025 Timeline Manager System
        </div>
    </div>

    <div class="modal-overlay" id="taskModal">
        <div class="modal-box">
            <h3>üìù ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Task</h3>
            <div class="form-row"><label>Project:</label><select id="inp_proj"></select></div>
            <div class="form-row"><label>Task Name:</label><input type="text" id="inp_name"></div>
            <div class="form-row"><label>Start:</label><input type="date" id="inp_start"></div>
            <div class="form-row"><label>End:</label><input type="date" id="inp_end"></div>
            <div class="form-row"><label>Phase:</label>
                <select id="inp_phase">
                    <option value="phase1">Phase 1: Research</option>
                    <option value="phase2">Phase 2: Dev</option>
                    <option value="phase3">Phase 3: Test</option>
                    <option value="phase4">Phase 4: Scale</option>
                    <option value="phase5">Phase 5: Launch</option>
                </select>
            </div>
            <div class="form-row"><label>Progress (%):</label><input type="number" id="inp_prog" min="0" max="100"></div>
            <div class="btn-group">
                <button class="btn-std" style="background:#28a745; flex:1;" onclick="saveTaskLocal()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                <button class="btn-std" style="background:#666; flex:1;" onclick="closeModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            </div>
        </div>
    </div>

    <script>
        // Data & State
        window.projects = [];
        window.selectedIds = new Set();
        let viewMode = 'month';
        let editMeta = null;
        const colors = ['#667eea', '#f093fb', '#4facfe', '#43e97b', '#fa709a', '#ff6b6b'];

        // --- Logic ---
        function initApp() {
            renderProjects();
            renderTimeline();
            updateStats();
        }

        window.renderAll = initApp; // Alias for cloud update

        // Project List
        function renderProjects() {
            const list = document.getElementById('projectList');
            list.innerHTML = '';
            window.projects.forEach((p, idx) => {
                const sel = window.selectedIds.has(p.id);
                const div = document.createElement('div');
                div.className = `proj-btn ${sel?'selected':''}`;
                div.innerHTML = `
                    <div class="proj-color" style="background:${p.color}"></div>
                    <span onclick="toggleProj(${p.id})">${p.name}</span>
                    <span onclick="delProj(${idx})" style="font-size:10px; color:red; margin-left:5px;">‚úñ</span>
                `;
                list.appendChild(div);
            });
            updateSelect();
        }

        window.toggleProj = (id) => {
            if(window.selectedIds.has(id)) window.selectedIds.delete(id); else window.selectedIds.add(id);
            renderAll();
        };
        window.selectAll = () => { window.projects.forEach(p=>window.selectedIds.add(p.id)); renderAll(); };
        window.deselectAll = () => { window.selectedIds.clear(); renderAll(); };

        window.addNewProject = () => {
            const name = prompt("Project Name:");
            if(name) {
                const pid = Date.now();
                window.projects.push({ id: pid, name: name, color: colors[window.projects.length%6], tasks: [] });
                window.selectedIds.add(pid);
                renderAll();
                if(window.saveToCloud) window.saveToCloud(); // Auto Save
            }
        };

        window.delProj = (idx) => {
            if(confirm("Delete Project?")) {
                window.projects.splice(idx, 1);
                renderAll();
                if(window.saveToCloud) window.saveToCloud(); // Auto Save
            }
        };

        // Timeline
        function renderTimeline() {
            const header = document.getElementById('calHeader');
            const body = document.getElementById('timelineBody');
            header.innerHTML = ''; body.innerHTML = '';

            const range = { start: new Date('2025-01-01'), end: new Date('2025-12-31') };
            const totalDays = (range.end - range.start) / (86400000);

            // Header
            let curr = new Date(range.start);
            if(viewMode === 'month') {
                curr.setDate(1);
                while(curr <= range.end) {
                    const d = document.createElement('div');
                    d.className = 'cal-cell'; d.style.minWidth = '100px';
                    d.textContent = curr.toLocaleString('default', {month:'short'});
                    header.appendChild(d);
                    curr.setMonth(curr.getMonth()+1);
                }
            } else {
                curr.setDate(curr.getDate()-curr.getDay());
                while(curr <= range.end) {
                    const d = document.createElement('div');
                    d.className = 'cal-cell'; d.style.minWidth = '40px';
                    d.textContent = 'W'+getWeek(curr);
                    header.appendChild(d);
                    curr.setDate(curr.getDate()+7);
                }
            }

            // Body
            const active = window.projects.filter(p => window.selectedIds.has(p.id));
            active.forEach(p => {
                const group = document.createElement('div');
                group.className = 'row-group';
                group.style.borderLeftColor = p.color;
                group.innerHTML = `<div class="row-head" style="color:${p.color}">${p.name}</div>`;

                p.tasks.forEach(t => {
                    const row = document.createElement('div');
                    row.className = 'row-task';
                    
                    // Calc bar
                    const s = new Date(t.startDate);
                    const e = new Date(t.endDate);
                    const left = ((s - range.start)/86400000 / totalDays) * 100;
                    const w = ((e - s)/86400000 / totalDays) * 100;

                    row.innerHTML = `
                        <div class="task-label">
                            <span>${t.name}</span>
                            <div class="task-actions">
                                <span style="cursor:pointer" onclick="editTask(${p.id}, '${t.id}')">‚úèÔ∏è</span>
                                <span style="cursor:pointer; color:red;" onclick="delTask(${p.id}, '${t.id}')">üóëÔ∏è</span>
                            </div>
                        </div>
                        <div class="task-chart">
                            <div class="grid-line" style="left:0; width:100%;"></div>
                            <div class="bar-container" style="left:${left}%; width:${Math.max(w,0.5)}%;">
                                <div class="bar-fill ${t.phase}" style="width:${t.progress}%">
                                    ${t.progress}%
                                </div>
                            </div>
                        </div>
                    `;
                    group.appendChild(row);
                });
                body.appendChild(group);
            });
        }

        // Task CRUD
        window.openTaskForm = () => {
            editMeta = null;
            document.getElementById('taskModal').style.display='block';
            document.getElementById('inp_name').value='';
            document.getElementById('inp_start').value='';
            document.getElementById('inp_end').value='';
            document.getElementById('inp_prog').value=0;
            updateSelect();
        };

        window.closeModal = () => document.getElementById('taskModal').style.display='none';

        window.saveTaskLocal = () => {
            const pid = document.getElementById('inp_proj').value;
            const task = {
                id: editMeta ? editMeta.tid : Date.now().toString(),
                name: document.getElementById('inp_name').value,
                startDate: document.getElementById('inp_start').value,
                endDate: document.getElementById('inp_end').value,
                phase: document.getElementById('inp_phase').value,
                progress: parseInt(document.getElementById('inp_prog').value)||0
            };
            if(!task.name) return alert("Required fields missing");

            const p = window.projects.find(x=>x.id==pid);
            if(editMeta) {
                if(editMeta.pid == pid) {
                    const idx = p.tasks.findIndex(t=>t.id==editMeta.tid);
                    p.tasks[idx] = task;
                } else {
                    const old = window.projects.find(x=>x.id==editMeta.pid);
                    old.tasks = old.tasks.filter(t=>t.id!=editMeta.tid);
                    p.tasks.push(task);
                }
            } else {
                p.tasks.push(task);
            }
            closeModal();
            renderAll();
            if(window.saveToCloud) window.saveToCloud(); // Auto Save
        };

        window.editTask = (pid, tid) => {
            editMeta = {pid, tid};
            const p = window.projects.find(x=>x.id==pid);
            const t = p.tasks.find(x=>x.id==tid);
            document.getElementById('taskModal').style.display='block';
            updateSelect();
            document.getElementById('inp_proj').value=pid;
            document.getElementById('inp_name').value=t.name;
            document.getElementById('inp_start').value=t.startDate;
            document.getElementById('inp_end').value=t.endDate;
            document.getElementById('inp_phase').value=t.phase;
            document.getElementById('inp_prog').value=t.progress;
        };

        window.delTask = (pid, tid) => {
            if(confirm("Delete task?")) {
                const p = window.projects.find(x=>x.id==pid);
                p.tasks = p.tasks.filter(x=>x.id!=tid);
                renderAll();
                if(window.saveToCloud) window.saveToCloud(); // Auto Save
            }
        };

        function updateSelect() {
            const s = document.getElementById('inp_proj');
            s.innerHTML = '';
            window.projects.forEach(p => {
                const o = document.createElement('option');
                o.value = p.id; o.text = p.name; s.appendChild(o);
            });
        }

        // Helpers
        function getWeek(d) {
            const onejan = new Date(d.getFullYear(),0,1);
            return Math.ceil((((d - onejan) / 86400000) + onejan.getDay()+1)/7);
        }
        function updateStats() {
            let tot=0, prog=0, done=0;
            const active = window.projects.filter(p=>window.selectedIds.has(p.id));
            active.forEach(p => {
                p.tasks.forEach(t => {
                    tot++;
                    if(t.progress>=100) done++; else if(t.progress>0) prog++;
                });
            });
            document.getElementById('st_total').innerText = tot;
            document.getElementById('st_prog').innerText = prog;
            document.getElementById('st_done').innerText = done;
        }

        window.setMode = (m) => {
            viewMode = m;
            document.getElementById('vmMonth').className = m=='month'?'view-btn active':'view-btn';
            document.getElementById('vmWeek').className = m=='week'?'view-btn active':'view-btn';
            renderTimeline();
        };

        window.showNotification = (msg, type) => {
            const d = document.createElement('div');
            d.innerText = msg;
            d.style.cssText = `position:fixed; top:20px; right:20px; background:${type=='success'?'#28a745':'#007bff'}; color:white; padding:10px 20px; border-radius:5px; z-index:10000; box-shadow:0 5px 15px rgba(0,0,0,0.2);`;
            document.body.appendChild(d);
            setTimeout(()=>d.remove(), 2000);
        };
    </script>
</body>
</html>
